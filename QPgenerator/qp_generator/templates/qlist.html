{% extends 'base.html' %}
{% block title %}search questions{% endblock %}
{% block heading %}search questions{% endblock %}
{% block content %}
    <div class="form" id="search_form">
        {% csrf_token %}
        {{ form.as_p }}
        <button id = "fetch" >submit</button>
    </div>
    <div id="list"></div>
{% endblock %}
{% block scripts %}
<script>
    $("#id_grade").change(function () {
    var url = $("#personForm").attr("load-sub-url");  
    var gradeId = $(this).val();  

    $.ajax({                       
        url: '/app/load_subjects',                 
        data: {
        'grade': gradeId       
        },
        success: function (data) {   
        $("#id_subject").html(data); 
        }
    });
    })
    $("#id_subject").change(function () {
    var url = $("#personForm").attr("load-sub-url");  
    var subjectId = $(this).val();
    var gradeId = $("#id_grade").val();  

    $.ajax({                       
        url: '/app/load_chapters',                 
        data: {
        'grade': gradeId,
        'subject': subjectId       
        },
        success: function (data) {   
        $("#id_chapter").html(data); 
        }
    });

    });

    $("#fetch").click(function(){
        $.ajax({
            url: '/app/load_questions',
            data: {
                'chapter' : $('#id_chapter').val()
            },
            success: function(data){
                $("#list").html(data)
            }
        });
    });

</script>
{% endblock %}

